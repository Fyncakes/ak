<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>FynCakes - Checkout</title>
		<link rel="stylesheet" href="{{ url_for('static', filename='css/checkout.css') }}" />
	</head>
	<body>
		<div class="container">
			<h1>Checkout</h1>
			<ul class="product-list" id="productList">
				<!-- Product items will be dynamically added here -->
			</ul>
			<button class="confirm-button" onclick="confirmPurchase()">Confirm Purchase</button>
		</div>

		<script>
			// Retrieve selected products from local storage
			const selectedProducts = JSON.parse(localStorage.getItem("selectedProducts")) || [];

			// Function to display selected products on the checkout page
			function displaySelectedProducts() {
				const productList = document.getElementById("productList");

				// Clear previous content
				productList.innerHTML = "";

				// Iterate over selected products and add them to the list
				selectedProducts.forEach((product) => {
					const listItem = document.createElement("li");
					listItem.classList.add("product-item");
					listItem.innerHTML = `
						<p class="product-name">${product.name}</p>
						<img class="product-image" src="${product.imageUrl}" alt="${product.name}" />
						<p>Price: <span class="product-price">${product.price}</span></p>
						<p class="product-description">Description: ${product.description}</p>
					`;
					productList.appendChild(listItem);
				});
			}

			window.onload = function () {
				displaySelectedProducts();
			};

			// Function to confirm purchase and redirect to the customer page
			function confirmPurchase() {
				// Implement logic to process the purchase
				alert("Purchase confirmed!");
				// Redirect to the customer page
				window.location.href = "{{ url_for('customer') }}";
			}
		</script>
	</body>
</html>
